{
  "name": "Personal Assistent Telegram",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "=Twoje zadanie to rozpoznanie intencji u≈ºytkownika na podstawie podanego tekstu.\n\nMasz do wyboru trzy mo≈ºliwe odpowiedzi:\n- \"sprawd≈∫ kalendarz\" ‚Äî je≈õli u≈ºytkownik chce sprawdziƒá, zobaczyƒá, zapytaƒá o kalendarz, wydarzenia, spotkania lub terminy.\n- \"utw√≥rz wydarzenie\" ‚Äî je≈õli u≈ºytkownik chce zaplanowaƒá, utworzyƒá, dodaƒá nowe wydarzenie lub um√≥wiƒá spotkanie.\n- \"nieznana akcja\" ‚Äî je≈õli intencja u≈ºytkownika nie jest jasna albo nie pasuje do ≈ºadnej z powy≈ºszych kategorii.\n\nPrzyk≈Çady:\n\nU≈ºytkownik: \"Co mam zaplanowane na jutro?\"\nOdpowied≈∫: sprawd≈∫ kalendarz\n\nU≈ºytkownik: \"Zaplanuj spotkanie z Janem jutro o 10\"\nOdpowied≈∫: utw√≥rz wydarzenie\n\nU≈ºytkownik: \"Jaka bƒôdzie jutro pogoda?\"\nOdpowied≈∫: nieznana akcja\n\nZasady:\n- Wybierz tylko jednƒÖ z trzech podanych odpowiedzi.\n- Nie dodawaj ≈ºadnych dodatkowych wyja≈õnie≈Ñ ani komentarzy.\n- Je≈õli tre≈õƒá u≈ºytkownika jest pusta lub nie dotyczy kalendarza/wydarze≈Ñ, wybierz \"nieznana akcja\".\n\nTeraz oce≈Ñ poni≈ºsze zdanie:\n\nU≈ºytkownik: \"{{ $json.message.text }}\"\nOdpowied≈∫:\n"
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        560,
        -1080
      ],
      "id": "82775106-02a9-42a2-82de-152431449912",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        648,
        -860
      ],
      "id": "5fe6521b-90de-4235-bb49-18aea29a7821",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "f7fa8SO4FZqRR0rk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Basic LLM Chain').item.json.text }}",
                    "rightValue": "utw√≥rz wydarzenie",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "9c641949-ac5c-4ec3-b15b-6062e9e2b362"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Utw√≥rz wydarzenie"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "a4cdb3a2-5ec1-4c9e-b117-8c54ba50bd0b",
                    "leftValue": "={{ $('Basic LLM Chain').item.json.text }}",
                    "rightValue": "sprawd≈∫ kalendarz",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Sprawd≈∫ kalendarz"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "03f5ba93-bc60-4a32-baf4-36ab84b55cff",
                    "leftValue": "={{ $('Basic LLM Chain').item.json.text }}",
                    "rightValue": "nieznana akcja",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Nieznana akcja"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        936,
        -1080
      ],
      "id": "743e6554-ae08-4d60-865b-cbcd896e9eb4",
      "name": "Switch"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Na podstawie poni≈ºszego tekstu wyciƒÖgnij szczeg√≥≈Çy dotyczƒÖce wydarzenia.\n\nTekst u≈ºytkownika:\n{{ $('Telegram Trigger').first().json.message.text || $('Code3').first().json.message.text }}\n\nDzisiejsza data: {{ $now.format('yyyy-LL-dd') }}\n\nTwoje zadanie:\n- Rozpoznaj tytu≈Ç wydarzenia (mo≈ºe to byƒá np. \"spotkanie z Janem\", \"kolacja z klientem\", itp.).\n- Rozpoznaj datƒô wydarzenia.\n  - Je≈õli u≈ºytkownik poda np. \"jutro\", \"w poniedzia≈Çek\" ‚Äî przelicz to na pe≈ÇnƒÖ datƒô w formacie `YYYY-MM-DD`, u≈ºywajƒÖc dzisiejszej daty jako punktu odniesienia.\n- Rozpoznaj godzinƒô wydarzenia.\n  - Je≈õli u≈ºytkownik poda godzinƒô (\"o 10\", \"o 18:30\"), zapisz jƒÖ w formacie `HH:mm`.\n\nZwr√≥ƒá odpowied≈∫ wy≈ÇƒÖcznie w formacie JSON dok≈Çadnie takim jak poni≈ºej:\n\n```json\n{\n  \"title\": \"<tytu≈Ç wydarzenia>\",\n  \"date\": \"<data wydarzenia w formacie YYYY-MM-DD>\",\n  \"time\": \"<godzina wydarzenia w formacie HH:mm>\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        1156,
        -1580
      ],
      "id": "2f617590-6cbb-447b-84ed-d04a129adce6",
      "name": "Basic LLM Chain1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1244,
        -1360
      ],
      "id": "3386d4d7-1e05-48ab-886e-42ce115a5050",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "f7fa8SO4FZqRR0rk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1. Parsowanie tekstu JSON\nconst inputText = $json.text;\nconst cleanJson = inputText.replace(/```json|```/g, '').trim();\nconst eventDetails = JSON.parse(cleanJson);\n\n// 2. Przygotowanie daty i godziny\nconst date = eventDetails.date; // \"2025-04-25\"\nconst time = eventDetails.time; // \"12:00\"\nconst title = eventDetails.title;\n\n// 3. Tworzenie obiektu Date start\nconst startDate = new Date(`${date}T${time}:00+02:00`);\n\n// 4. Tworzenie obiektu Date end (+1 godzina)\nconst endDate = new Date(startDate.getTime() + 60 * 60 * 1000);\n\n// 5. Zwr√≥cenie w formacie ISO\nreturn {\n  startDateTime: startDate.toISOString(),\n  endDateTime: endDate.toISOString(),\n  title: title\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1532,
        -1480
      ],
      "id": "5ce24ce5-16b2-4e8b-8682-348bed965dd0",
      "name": "Code"
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "blazej@kapala.com.pl",
          "mode": "list",
          "cachedResultName": "blazej@kapala.com.pl"
        },
        "start": "={{ $json.startDateTime }}",
        "end": "={{ $json.endDateTime }}",
        "additionalFields": {
          "summary": "={{ $json.title }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1.3,
      "position": [
        1752,
        -1480
      ],
      "id": "db01e1e3-0c29-43e6-96e4-e28d955626a5",
      "name": "Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "rnvQ4ILllrgNZKKs",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -980,
        -1280
      ],
      "id": "f89775de-5190-4095-889b-178a0790f850",
      "name": "Telegram Trigger",
      "webhookId": "a870add4-346e-4dc1-80fd-8da8b65525f2",
      "credentials": {
        "telegramApi": {
          "id": "E8JhkHzas8OdlTNS",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Napisz to inaczej",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1234,
        -780
      ],
      "id": "4e9d9be0-909c-4337-8af5-05b10ca5d90a",
      "name": "Telegram",
      "webhookId": "004ff1c8-47be-4679-88cb-85cc3796822f",
      "credentials": {
        "telegramApi": {
          "id": "E8JhkHzas8OdlTNS",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "={{ $json.text }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2426,
        -1480
      ],
      "id": "10b27d4d-e037-4672-9853-6a06ee5e46b8",
      "name": "Telegram1",
      "webhookId": "c700311c-7f1c-4c2d-954d-52b60a4c87bf",
      "credentials": {
        "telegramApi": {
          "id": "E8JhkHzas8OdlTNS",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "content": "## üß† Porozmawiaj z kalendarzem przez Telegrama\n\n**Ten workflow integruje Telegram, OpenAI i Google Calendar w celu reagowania na wiadomo≈õci i wykonywania okre≈õlonych dzia≈Ça≈Ñ:**\n\n1. **Telegram Trigger** ‚Äì reaguje na wiadomo≈õƒá otrzymanƒÖ na czacie Telegrama.\n\n2. **Basic LLM Chain + OpenAI Chat Model** ‚Äì wiadomo≈õƒá jest przetwarzana przez model jƒôzykowy OpenAI (np. GPT), aby rozpoznaƒá intencjƒô u≈ºytkownika.\n\n3. **Switch (mode: Rules)** ‚Äì rozga≈Çƒôzia przep≈Çyw na podstawie rozpoznanej intencji:\n\n   - **‚ÄûUtw√≥rz wydarzenie‚Äù** ‚Äì przekierowuje dane do kolejnego modelu LLM oraz:\n     - przekszta≈Çca dane w formacie wymaganym przez Google Calendar (`Code` node),\n     - tworzy wydarzenie (`Google Calendar`),\n     - wysy≈Ça potwierdzenie przez Telegram (`Telegram1`).\n\n   - **‚ÄûSprawd≈∫ kalendarz‚Äù lub inne znane komendy** ‚Äì *(miejsce na rozwiniƒôcie)*\n\n   - **‚ÄûNieznana akcja‚Äù** ‚Äì wysy≈Ça wiadomo≈õƒá z informacjƒÖ o nieznanym poleceniu (`Telegram`).\n",
        "height": 460,
        "width": 680
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -880,
        -2000
      ],
      "typeVersion": 1,
      "id": "3ef615d9-f5e5-45ce-bd75-6997fef4a339",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "eead082d-e2b4-404f-a563-d78fd822c009",
              "leftValue": "={{ $json.message.text }}",
              "rightValue": "/start",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        340,
        -1280
      ],
      "id": "daf8b097-026f-43b2-ba40-df15645ec5c6",
      "name": "If"
    },
    {
      "parameters": {
        "chatId": "={{ $json.message.chat.id }}",
        "text": "Dzie≈Ñ dobry - co mogƒô dla Ciebie zrobiƒá",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        638,
        -1430
      ],
      "id": "64677cbe-4149-4f8a-98a2-c5b7c9277e8a",
      "name": "Telegram2",
      "webhookId": "4ea0d095-d286-439c-a30b-55fbfd53f9b3",
      "credentials": {
        "telegramApi": {
          "id": "E8JhkHzas8OdlTNS",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Na podstawie poni≈ºszego tekstu ustal, o jaki dzie≈Ñ lub zakres dni chodzi.  \nWydobƒÖd≈∫ informacjƒô o dacie lub zakresie dat z tre≈õci wiadomo≈õci u≈ºytkownika.\n\nTekst u≈ºytkownika:\n{{ $('Telegram Trigger').first().json.message.text || $('Code3').first().json.message.text }}\n\nDzisiejsza data: {{ $now.format('yyyy-LL-dd') }}\n\nTwoje zadanie:\n- Je≈õli u≈ºytkownik poda pojedynczy dzie≈Ñ (np. \"poniedzia≈Çek\", \"jutro\"), ustal konkretnƒÖ datƒô.\n- Je≈õli u≈ºytkownik poda zakres dni (np. \"przysz≈Çy tydzie≈Ñ\", \"od ≈õrody do piƒÖtku\", \"ca≈Çy weekend\"), ustal pe≈Çny zakres:\n  - \"dayStart\" powinien wskazywaƒá poczƒÖtek pierwszego dnia o godzinie 00:00:00.000\n  - \"dayEnd\" powinien wskazywaƒá koniec ostatniego dnia o godzinie 23:59:59.999\n- Je≈õli u≈ºytkownik nie poda ≈ºadnych informacji o dacie, przyjmij dzisiejszy dzie≈Ñ jako dzie≈Ñ wyszukiwania.\n\nWszystkie daty i czasy muszƒÖ uwzglƒôdniaƒá odpowiedniƒÖ strefƒô czasowƒÖ i byƒá zapisane w pe≈Çnym formacie, jak w przyk≈Çadzie:\n`2025-04-26T05:57:40.654-04:00`\n\nFormat odpowiedzi:\n```json\n{\n  \"dayStart\": \"<data rozpoczƒôcia zakresu w pe≈Çnym formacie>\",\n  \"dayEnd\": \"<data zako≈Ñczenia zakresu w pe≈Çnym formacie>\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        1156,
        -1180
      ],
      "id": "a930e444-516a-493c-acdc-3a78613ebd2d",
      "name": "Basic LLM Chain2"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1244,
        -960
      ],
      "id": "2a0ed9e9-157b-4e38-ae45-660504470142",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "f7fa8SO4FZqRR0rk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "blazej@kapala.com.pl",
          "mode": "list",
          "cachedResultName": "blazej@kapala.com.pl"
        },
        "timeMin": "={{ $json.dayStart }}",
        "timeMax": "={{ $json.dayEnd }}",
        "options": {}
      },
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1.3,
      "position": [
        1752,
        -1080
      ],
      "id": "418dc1e1-c1a9-4b1b-b882-960ba6807a1f",
      "name": "Google Calendar1",
      "alwaysOutputData": true,
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "rnvQ4ILllrgNZKKs",
          "name": "Google Calendar account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Na podstawie dostarczonych danych wypisz wszystkie zaplanowane spotkania w spos√≥b czytelny.\n\nDane wej≈õciowe:\n{{ $json.text }}\n\nTwoje zadanie:\n- Najpierw zawsze podaj, jakiego dnia lub jakiego zakresu dni dotyczƒÖ dane spotkania (np. \"Spotkania na 2025-04-28\" albo \"Spotkania od 2025-04-28 do 2025-04-30\").\n- Nastƒôpnie:\n  - Je≈õli sƒÖ spotkania, wypisz ka≈ºde spotkanie w nastƒôpujƒÖcym formacie:\n    - Nazwa spotkania\n    - Data rozpoczƒôcia\n    - Godzina rozpoczƒôcia\n    - Data zako≈Ñczenia\n    - Godzina zako≈Ñczenia\n  - Je≈õli brak spotka≈Ñ, napisz tylko: \"Brak zaplanowanych spotka≈Ñ.\"\n- Nie dodawaj ≈ºadnych dodatkowych wyja≈õnie≈Ñ ani komentarzy poza tym co wymagane.\n\nPrzyk≈Çad odpowiedzi, gdy sƒÖ spotkania:\n\nSpotkania na 2025-04-28:\n\n- Spotkanie: \"Obiad\"\n- Data rozpoczƒôcia: 2025-04-28\n- Godzina rozpoczƒôcia: 11:00\n- Data zako≈Ñczenia: 2025-04-28\n- Godzina zako≈Ñczenia: 12:00\n\nPrzyk≈Çad odpowiedzi, gdy brak spotka≈Ñ:\n\nSpotkania na 2025-04-28:\n\nBrak zaplanowanych spotka≈Ñ.\n"
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        2348,
        -1080
      ],
      "id": "7bccaf38-bc41-4be1-896b-42595addc10c",
      "name": "Basic LLM Chain3"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2436,
        -860
      ],
      "id": "5d2c5a3c-c608-4281-833e-0fbfbdfeebc7",
      "name": "OpenAI Chat Model3",
      "credentials": {
        "openAiApi": {
          "id": "f7fa8SO4FZqRR0rk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// INPUT: list of Google Calendar events\n// OUTPUT: single text summary for LLM\n\n// Je≈õli brak danych, informuj o tym\nif (!items.length) {\n  return [\n    {\n      json: {\n        text: 'Brak danych do analizy.'\n      }\n    }\n  ];\n}\n\n// Je≈õli sƒÖ dane, przetwarzaj normalnie\nconst events = items.map(item => {\n  const data = item.json;\n  return `üóìÔ∏è Spotkanie: ${data.summary || 'Brak nazwy'}\nStart: ${data.start?.dateTime || 'Brak daty startu'}\nKoniec: ${data.end?.dateTime || 'Brak daty ko≈Ñca'}\nOrganizator: ${data.organizer?.email || 'Brak organizatora'}\nLink: ${data.htmlLink || 'Brak linku'}\n`;\n});\n\n// Po≈ÇƒÖcz wszystko w jeden wielki tekst\nconst output = events.join('\\n---\\n');\n\nreturn [\n  {\n    json: {\n      text: output\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2050,
        -1080
      ],
      "id": "34e7f593-a788-457e-a001-bead509cd232",
      "name": "Code1"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').first().json.message.chat.id }}",
        "text": "={{ $json.text }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2724,
        -1080
      ],
      "id": "88d2a7d7-e170-47a7-b099-75c984be754e",
      "name": "Telegram3",
      "webhookId": "c301264b-b50a-47ba-bf69-9f2acfabe4ed",
      "credentials": {
        "telegramApi": {
          "id": "E8JhkHzas8OdlTNS",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// We assume there is only one item\nconst text = items[0].json.text;\n\n// WyciƒÖgamy fragment pomiƒôdzy ```json ... ```\nconst jsonMatch = text.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n\nif (!jsonMatch || !jsonMatch[1]) {\n  throw new Error('Nie znaleziono poprawnego JSON w tek≈õcie.');\n}\n\n// Parsujemy tekst do JSON\nconst parsedJson = JSON.parse(jsonMatch[1]);\n\nreturn [\n  {\n    json: parsedJson\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1532,
        -1080
      ],
      "id": "60ff5659-0ffa-40a2-91aa-bc09425acf03",
      "name": "Code2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Utworzono spotkanie: {{ $json.summary }}\nüïí Od: {{ $json.start.dateTime }}\nüïì Do: {{ $json.end.dateTime }}\nüîó {{ $json.htmlLink }}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        1972,
        -1580
      ],
      "id": "3d334813-c402-4080-af84-fb5171821ab4",
      "name": "Basic LLM Chain4"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2060,
        -1360
      ],
      "id": "dbc23982-6cb8-4a3e-b9bd-d29c7138fbfd",
      "name": "OpenAI Chat Model4",
      "credentials": {
        "openAiApi": {
          "id": "f7fa8SO4FZqRR0rk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "c97ab4cc-a06a-4006-878a-a93852b51252",
              "leftValue": "={{ $json.message.voice.mime_type }}",
              "rightValue": "audio/ogg",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -760,
        -1280
      ],
      "id": "1d4eb1b0-a844-4c02-8992-ec6a19cbe0fe",
      "name": "If1"
    },
    {
      "parameters": {
        "url": "=https://api.telegram.org/bot<API:token>/getFile?file_id={{ $('Telegram Trigger').first().json.message.voice.file_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -540,
        -1355
      ],
      "id": "de23e0f1-6e75-4e54-9bae-0d5ea846f5ab",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "url": "=https://api.telegram.org/file/bot<API:token>/{{ $json.result.file_path }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -320,
        -1355
      ],
      "id": "a72cfd63-b10b-4e4b-907e-69eafef45725",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {
          "language": "pl"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -100,
        -1355
      ],
      "id": "bc54ec8f-69f2-4161-a327-d81d20411556",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "f7fa8SO4FZqRR0rk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const transcription = items[0].json.text || 'Brak tekstu';\n\nreturn [\n  {\n    json: {\n      message: {\n        text: transcription\n      }\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        120,
        -1355
      ],
      "id": "ff13530c-e911-4d09-9639-b54213a9ae31",
      "name": "Code3"
    }
  ],
  "pinData": {},
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Basic LLM Chain1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Basic LLM Chain2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain1": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Google Calendar",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar": {
      "main": [
        [
          {
            "node": "Basic LLM Chain4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Telegram2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain2": {
      "main": [
        [
          {
            "node": "Code2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar1": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "Basic LLM Chain3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain3": {
      "main": [
        [
          {
            "node": "Telegram3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code2": {
      "main": [
        [
          {
            "node": "Google Calendar1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain4": {
      "main": [
        [
          {
            "node": "Telegram1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain4",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code3": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "aa107657-5131-4656-9c54-8bfb9182e2d3",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "684bad3be9caedd73d03aab01f0148d107f09965d3d4d67f1019826eeec6d9c1"
  },
  "id": "vkesXggsCulSPkQS",
  "tags": []
}
